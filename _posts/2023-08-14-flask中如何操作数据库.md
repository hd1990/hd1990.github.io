---
layout: post
title: flask中如何操作数据库
date: 2023-08-14
description: "flask中如何操作数据库"
tag: 后端
---


## python中操作数据库

### 创建数据库

```python
# pip install flask-sqlalchemy
from flask_sqlalchemy import SQLAlchemy
from flask import Flask
# 连接mysql数据库需要导入pymysql
import pymysql

# 创建flask对象
app = Flask(__name__)
# 连接mysql
# app.config['SQLALCHEMY_DATABASE_URL']= 'mysql+pymysql://root:123456@localhost:3306/flask'
# 连接自带的sqlite数据库
app.config['SQLALCHEMY_DATABASE_URL']='sqlite:///'+"/home/hugo/test.db"

app.config['SQLALCHEMY_TRACK_MODIFICATIONS']=False

# 密钥
app.config['SECRET_KEY']='*'

# 实例化数据库对象
db = SQLAlchemy(app)

if __name__ == '__main__':
    # 删除表
    db.drop_all()
    # 创建表
    db.create_all()
    # 运行flask
    app.run(debug=True)
```


## 通过模板进行交互

### Jinja2模板语言

```python


在项目文件夹下创建templates文件夹，用于存放html文件，比如说存放hello.html文件,这个模板文件示意如下：

```html
<!doctype html>
<title>{% block title %}{% endblock %} - My Webpage</title>
{% if name %}
    <h1>Hello, {{ name }}!</h1>
{% else %}
    <h1>Hello, World!</h1>
{% endif %}
{% block content %}{% endblock %}
```

在项目的主文件下，比如说app.py文件，示意如下：

```python
from flask import Flask, render_template

app = Flask(__name__)

@app.route('/hello/')
@app.route('/hello/<name>')
def hello(name=None):
    return render_template('hello.html', name=name)
```

